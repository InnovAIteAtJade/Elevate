<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hacker Terminal Game</title>

<style>
body {
    margin: 0;
    background: black;
    color: #00ff00;
    font-family: "Courier New", monospace;
}

#terminal {
    padding: 20px;
}

input, button {
    background: black;
    color: #00ff00;
    border: 1px solid #00ff00;
    padding: 6px;
    font-family: monospace;
}

#hackOutput {
    display: none;
    margin-top: 20px;
    border: 1px solid #00ff00;
    padding: 10px;
    height: 300px;
    overflow-y: hidden;
    white-space: pre-line;
    background: rgba(0,0,0,0.6);
}

.hidden {
    display: none;
}
</style>
</head>

<body>

<div id="terminal">
    <h2>TERMINAL ACCESS </h2>
    <p><b>Level #1:</b></p>
    <p>3, 6, 12, 21, 33, 48, ?</p>

    <p>Enter the missing number:</p>
    <input type="text" id="puzzleInput" placeholder="Answer">
    <button id="submitPuzzle">SUBMIT</button>

    <div id="hackOutput"></div>

    <p id="finalPw" class="hidden"></p>
</div>

<script>
// --------------------------------------------------
// PUZZLE 1 (Math + Logic Hybrid)
// --------------------------------------------------
document.getElementById("submitPuzzle").addEventListener("click", () => {
    const v = document.getElementById("puzzleInput").value.trim();

    if (v === "66") {
        startHackCinematic();
    } else {
        alert("Incorrect. Try again.");
    }
});

// --------------------------------------------------
// HACK CINEMATIC SEQUENCE
// --------------------------------------------------
function startHackCinematic() {
    const box = document.getElementById("hackOutput");
    box.style.display = "block";
    box.innerHTML = "";

    const lines = [
        "[ACCESS GRANTED] Sequence integrity verified...",
        "Initializing deep-core decryptor...",
        "Scanning multi-channel logic gates...",
        "Calibrating entropy scrubbers...",
        "Aligning quantum threads...",
        "Resolving fragmented memory lattice...",
        "Synchronizing parallel lanes...",
        "Warning: modifier-layer desync detected...",
        "Dual-channel authorization not aligned...",
        "Left-hand function key: STANDBY",
        "Upper-tier modifier: PENDING",
        "Composite activation index: 0%",
        "Awaiting synchronous trigger from both layers...",
        "Monitoring for simultaneous physical actuation...",
        "--------------------------------------------",
        "SYSTEM HOLD: awaiting user-trigger resolution."
    ];

    let i = 0;

    const interval = setInterval(() => {
        box.innerHTML += lines[i] + "\n";
        box.scrollTop = box.scrollHeight;
        i++;

        if (i >= lines.length) {
            clearInterval(interval);
            enableFinalPuzzle();
        }
    }, 300);
}

// --------------------------------------------------
// FINAL PUZZLE (VERY SUBTLE)
// --------------------------------------------------
function enableFinalPuzzle() {
    const box = document.getElementById("hackOutput");

    box.innerHTML += "\n• Resolve modifier-layer conflict to proceed.\n";
    box.innerHTML += "• System listening for physical dual-key activation.\n";
    box.innerHTML += "• No virtual commands accepted.\n\n";
    box.innerHTML += ">>> Awaiting resolution...\n";
}

// --------------------------------------------------
// PHYSICAL ACTIVATION LISTENER (CTRL + SHIFT)
// --------------------------------------------------
let ctrlDown = false;
let shiftDown = false;

window.addEventListener("keydown", (e) => {
    if (e.key === "Control") ctrlDown = true;
    if (e.key === "Shift") shiftDown = true;

    if (ctrlDown && shiftDown) {
        revealFinalPassword();
    }
});

window.addEventListener("keyup", (e) => {
    if (e.key === "Control") ctrlDown = false;
    if (e.key === "Shift") shiftDown = false;
});

// --------------------------------------------------
// PASSWORD REVEAL
// --------------------------------------------------
function revealFinalPassword() {
    const box = document.getElementById("hackOutput");
    const pw = document.getElementById("finalPw");

    box.innerHTML += "\n[DUAL-KEY ACTIVATION DETECTED]\n";
    box.innerHTML += "Stabilizing modifier channels...\n";
    box.innerHTML += "Decrypting final passcode...\n\n";

    setTimeout(() => {
        pw.classList.remove("hidden");
        pw.innerHTML = ">>> FINAL PASSWORD: <b>IH2026</b><br><br>Use this on the PORTAL.";
        box.innerHTML += pw.innerHTML;
        box.scrollTop = box.scrollHeight;
    }, 1000);
}
</script>

</body>
</html>
